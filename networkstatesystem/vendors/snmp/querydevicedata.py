#!/usr/bin/env python## This Script polls all interface statistics using the OID form the IF-MIB object# It returns the data to the screen#from .querysnmpdata import *import string# This function retrieves the available interface datadef populateifdata(device, community):	oids = '1.3.6.1.2.1.2.2.1'		indextable = {}				walkreturn = snmpwalkoid(device, community, oids)			for currentrow in walkreturn:		for indexoid, val in currentrow:			replaced = string.replace(indexoid.prettyPrint(), oids, '')[1::]			value = val.prettyPrint()					(oidnumber, ifindex) = string.split(replaced,'.')			ifindex = int(ifindex)			oidnumber = int(oidnumber)					if ifindex in indextable:				indextable[ifindex][oidnumber] = value			else:				indextable[ifindex] = {}				indextable[ifindex][oidnumber] = value													return indextabledef collectroutingtable(device, community):	oids = '1.3.6.1.2.1.4.24.4.1.'		walkreturn = snmpwalkoid(device, community, oids)			# oid example 1.3.6.1.2.1.4.24.4.1.24.4.1.1.10.5.6.0.255.255.255.0.0.0.0.0.0	indextable = {}		for currentrow in walkreturn:		for indexoid, val in currentrow:			replaced = string.replace(indexoid.prettyPrint(), oids, '')			value = val.prettyPrint()					(oidnumber, routeindex) = string.split(replaced,'.', 1)			oidnumber = int(oidnumber)			if routeindex in indextable:				indextable[routeindex][oidnumber] = value			else:				indextable[routeindex] = {}				indextable[routeindex][oidnumber] = value	return indextabledef gethostname(device, community):	sysName = ".1.3.6.1.2.1.1.5.0"		oid, hostreturn = snmpgetoid(device, community, sysName)		return hostreturn.prettyPrint()def getosversion(device, community):	#osVersion = ".1.3.6.1.2.1.25.6.3.1.2.2"	osVersion = ".1.3.6.1.2.1.1.1.0"			oid, versionreturn = snmpgetoid(device, community, osVersion)		return versionreturn.prettyPrint()
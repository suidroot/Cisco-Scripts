#!/usr/bin/env python## This Script polls and returns the current routing table#from vendors.snmp import querysnmpdataimport sysimport stringimport argparseimport csv# This function retrieves the available interface datadef collectroutingtable(device, community):	oids = '1.3.6.1.2.1.4.24.4.1.'		walkreturn = querysnmpdata.snmpwalkoid(device, community, oids)			# oid example 1.3.6.1.2.1.4.24.4.1.24.4.1.1.10.5.6.0.255.255.255.0.0.0.0.0.0	indextable = {}		for currentrow in walkreturn:		for indexoid, val in currentrow:			replaced = string.replace(indexoid.prettyPrint(), oids, '')			value = val.prettyPrint()					(oidnumber, routeindex) = string.split(replaced,'.', 1)			oidnumber = int(oidnumber)			if routeindex in indextable:				indextable[routeindex][oidnumber] = value			else:				indextable[routeindex] = {}				indextable[routeindex][oidnumber] = value	return indextabledef printroutingtable (routingtable):	for routeid in sorted(routingtable):		#print "{0}".format(routeid),		for oid in sorted(routingtable[routeid]):			print "{0}".format(routingtable[routeid][oid]),		print "\n",